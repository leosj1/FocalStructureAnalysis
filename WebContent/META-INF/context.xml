<?xml version="1.0" encoding="UTF-8"?>

<!-- Apache Tomcat 9 Context configuration reference
     https://tomcat.apache.org/tomcat-9.0-doc/config/context.html
-->
<Context>

  <!-- To move the <Resource> configuration to server.xml
        1. Use the <ResourceLink> below
        2. Change localDataSource="true" to localDataSource="false"-->
  <Realm className="org.apache.catalina.realm.LockOutRealm">
    <Realm className="org.apache.catalina.realm.DataSourceRealm"
      dataSourceName="jdbc/fsa"
      userTable="usercredentials"
      userNameCol="UserName"
      userCredCol="Password"
      userRoleTable="user_roles"
      roleNameCol="role_name"
      localDataSource="true">

      <CredentialHandler className="org.apache.catalina.realm.NestedCredentialHandler">
        <CredentialHandler
          className="org.apache.catalina.realm.SecretKeyCredentialHandler"
          algorithm="PBKDF2WithHmacSHA512"
          iterations="100000"
          keyLength="256"
          saltLength="16">
        </CredentialHandler>
      </CredentialHandler>
    </Realm>
  </Realm>

  <!--  Apache Tomcat 9 JDBC Pool Connection
        Comments Copyright Â© 1999-2017, The Apache Software Foundation
        https://tomcat.apache.org/tomcat-9.0-doc/jndi-datasource-examples-howto.html# -->

  <!--  MySQL_DBCP_Example
        maxTotal: Maximum number of database connections in pool. Make sure you
        configure your mysqld max_connections large enough to handle
        all of your db connections. Set to -1 for no limit.

        maxIdle: Maximum number of idle database connections to retain in pool.
        Set to -1 for no limit.  See also the DBCP documentation on this
        and the minEvictableIdleTimeMillis configuration parameter.

        maxWaitMillis: Maximum time to wait for a database connection to become
        available in ms, in this example 10 seconds. An Exception is thrown if
        this timeout is exceeded.  Set to -1 to wait indefinitely.

        username and password: MySQL username and password for database
        connections

        driverClassName: Class name for the old mm.mysql JDBC driver is
        org.gjt.mm.mysql.Driver - we recommend using Connector/J though.
        Class name for the official MySQL Connector/J driver is
        com.mysql.jdbc.Driver.

        url: The JDBC connection url for connecting to your MySQL database. -->

  <!-- FSA Database Access: User Credentials & App Data -->
  <!-- Configure Below for deployment Server -->
  <!-- <Resource
    name="jdbc/fsa"
    auth="Container"
    type="javax.sql.DataSource"
    username="fsa_tomcat_access"
    password="pkZkGTjmL3ZUEFG"
    maxTotal="100"
    maxIdle="10"
    maxWaitMillis="10000"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://144.167.115.218:3306/andrew"
  /> -->
  
  <Resource
    name="jdbc/fsa"
    auth="Container"
    type="javax.sql.DataSource"
    username="db_mover"
    password="Cosmos1"
    maxTotal="100"
    maxIdle="10"
    maxWaitMillis="10000"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://144.167.35.89:3306/andrew"
  />

  <!-- To move the <Resource> configuration to server.xml
        1. Use the <ResourceLink> below
        2. Change localDataSource="true" to localDataSource="false"-->
  <!-- <ResourceLink global="jdbc/fsa" name="jdbc/fsa" type="javax.sql.DataSource" /> -->

</Context>
